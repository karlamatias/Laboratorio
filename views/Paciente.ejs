<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">

        <title>Pacientes</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous">

    </head>

    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-primary">
            <div class="container-fluid">

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a style="border: none" class="btn
                                btn-outline-light" aria-current="page" href="/admin">Regresar</a>
                        </li>

                    </ul>
                </div>
                

            </nav>

            <br>

            <div class="d-flex">
                <div class="card col-sm-4">
                    <div class="card-body">
                        <form action="/agregar" method="POST">
                            <div class="form-group">
                                <label> DPI </label>
                                <input type="text" value="" name="CUI" class="form-control">
                            </div>
                            <div class="form-group">
                                <label> Nombre </label>
                                <input type="text" value="" name="nombre" class="form-control">
                            </div>
                            <div class="form-group">
                                <label> Apellido</label>
                                <input type="text" value="" name="apellidos"
                                    class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Fecha Nacimiento</label>
                                <input type="text" value="" name="FechaNacimiento"
                                    class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Direccion</label>
                                <input type="text" value="" name="Direccion"
                                    class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Telefono</label>
                                <input type="text" value="" name="telefono"
                                    class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Sexo</label>
                                <input type="text" value="" name="Sexo" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Medico referente</label>
                                <input type="text" value="" name="MedicoReferente"
                                    class="form-control">
                            </div>
                            <br>
                            <button type="submit" class="btn btn-primary">
                                Agregar
                            </button>


                        </form>
                    </div>
                </div>

                <div class="col-sm-8">
                    <table class="table table-hover">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">CUI</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Apellido</th>
                                <th scope="col">Fecha Nacimiento</th>
                                <th scope="col">Direccion</th>
                                <th scope="col">Telefono</th>
                                <th scope="col">Sexo</th>
                                <th scope="col">Medico Referente</th>
                                <th scope="col">Acciones</th>


                            </tr>
                        </thead>
                        <tbody>
                            <%# como lo que manda la base de datos es un
                                arreglo, debemos recorrerlo y mostrar los datos
                                solicitados con codigo ejs. Primero si hay
                                datos, los mostramos. Por cada recorrido del"for"
                                , genera una fila y multiples celdas %>
                                <% if (data) { %>
                                    <% for(var i= 0; i <data.length; i++) { %>
                                        <tr>
                                            <td><%= data[i].CUI %></td>
                                                <td><%= data[i].nombre %></td>
                                                    <td><%= data[i].apellidos %></td>
                                                        <td><%=
                                                                data[i].FechaNacimiento
                                                                %></td>
                                                            <td><%=
                                                                    data[i].Direccion
                                                                    %></td>
                                                                <td><%=
                                                                        data[i].telefono
                                                                        %></td>
                                                                    <td><%=
                                                                            data[i].Sexo
                                                                            %></td>
                                                                        <td><%=
                                                                                data[i].MedicoReferente
                                                                                %></td>
                                                                            <td>
                                                                                <a
                                                                                    href="/deletePaciene/<%=
                                                                                    data[i].CUI
                                                                                    %>"
                                                                                    class="btn
                                                                                    btn-danger">Eliminar</a>
                                                                                <a
                                                                                    href="/updatePaciente/<%=
                                                                                    data[i].CUI
                                                                                    %>"
                                                                                    class="btn
                                                                                    btn-warning">Editar</a>
                                                                            </td>
                                                                        </tr>
                                                                        <% } %>
                                                                            <% }
                                                                                %>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>


                                                                <script
                                                                    src="/js/pacientes.js"></script>
                                                            </body>
                                                        </html>